/*!
handy-scroll v1.0.6
https://amphiluke.github.io/handy-scroll/
(c) 2021 Amphiluke
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).handyScroll=n()}(this,(function(){"use strict";var e=Array.prototype.slice,n="object"==typeof document&&!!document.documentElement,t={isDOMAvailable:n,doc:n?document:null,html:n?document.documentElement:null,body:n?document.body:null,ready:function(e){"loading"===t.doc.readyState?t.doc.addEventListener("DOMContentLoaded",(function(){e()}),{once:!0}):e()},$:function(e){return"string"==typeof e?t.body.querySelector(e):e},$$:function(n){return Array.isArray(n)?n:n.nodeType===Node.ELEMENT_NODE?[n]:"string"==typeof n?e.call(t.body.querySelectorAll(n)):e.call(n)}},i={init:function(e){var n=this,i=t.$$(".handy-scroll-body").filter((function(n){return n.contains(e)}));i.length&&(n.scrollBody=i[0]),n.container=e,n.visible=!0,n.initWidget(),n.update(),n.addEventHandlers(),n.skipSyncContainer=n.skipSyncWidget=!1},initWidget:function(){var e=this,n=e.widget=t.doc.createElement("div");n.classList.add("handy-scroll");var i=t.doc.createElement("div");i.style.width=e.container.scrollWidth+"px",n.appendChild(i),e.container.appendChild(n)},addEventHandlers:function(){var e=this;(e.eventHandlers=[{el:e.scrollBody||window,handlers:{scroll:function(){e.checkVisibility()},resize:function(){e.update()}}},{el:e.widget,handlers:{scroll:function(){e.visible&&!e.skipSyncContainer&&e.syncContainer(),e.skipSyncContainer=!1}}},{el:e.container,handlers:{scroll:function(){e.skipSyncWidget||e.syncWidget(),e.skipSyncWidget=!1},focusin:function(){setTimeout((function(){return e.syncWidget()}),0)}}}]).forEach((function(e){var n=e.el,t=e.handlers;Object.keys(t).forEach((function(e){return n.addEventListener(e,t[e],!1)}))}))},checkVisibility:function(){var e=this,n=e.widget,i=e.container,o=e.scrollBody,c=n.scrollWidth<=n.offsetWidth;if(!c){var r=i.getBoundingClientRect(),l=o?o.getBoundingClientRect().bottom:window.innerHeight||t.html.clientHeight;c=r.bottom<=l||r.top>l}e.visible===c&&(e.visible=!c,n.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var e=this,n=e.widget.scrollLeft;e.container.scrollLeft!==n&&(e.skipSyncWidget=!0,e.container.scrollLeft=n)},syncWidget:function(){var e=this,n=e.container.scrollLeft;e.widget.scrollLeft!==n&&(e.skipSyncContainer=!0,e.widget.scrollLeft=n)},update:function(){var e=this,n=e.widget,t=e.container,i=e.scrollBody,o=t.clientWidth,c=t.scrollWidth;n.style.width=o+"px",i||(n.style.left=t.getBoundingClientRect().left+"px"),n.firstElementChild.style.width=c+"px",c>o&&(n.style.height=n.offsetHeight-n.clientHeight+1+"px"),e.syncWidget(),e.checkVisibility()},destroy:function(){var e=this;e.eventHandlers.forEach((function(e){var n=e.el,t=e.handlers;Object.keys(t).forEach((function(e){return n.removeEventListener(e,t[e],!1)}))})),e.widget.parentNode.removeChild(e.widget),e.eventHandlers=e.widget=e.container=e.scrollBody=null}},o=[],c={mount:function(e){t.$$(e).forEach((function(e){if(!c.mounted(e)){var n=Object.create(i);o.push(n),n.init(e)}}))},mounted:function(e){var n=t.$(e);return o.some((function(e){return e.container===n}))},update:function(e){t.$$(e).forEach((function(e){o.some((function(n){return n.container===e&&(n.update(),!0)}))}))},destroy:function(e){t.$$(e).forEach((function(e){o.some((function(n,t){return n.container===e&&(o.splice(t,1)[0].destroy(),!0)}))}))}};return t.isDOMAvailable&&t.ready((function(){c.mount("[data-handy-scroll]")})),c}));
