/*!
handy-scroll v1.1.3
https://amphiluke.github.io/handy-scroll/
(c) 2023 Amphiluke
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).handyScroll=e()}(this,(function(){"use strict";var t=Array.prototype.slice,e="object"==typeof document&&!!document.documentElement,n={isDOMAvailable:e,doc:e?document:null,html:e?document.documentElement:null,body:e?document.body:null,ready:function(t){"loading"===n.doc.readyState?n.doc.addEventListener("DOMContentLoaded",(function(){t()}),{once:!0}):t()},$:function(t){return"string"==typeof t?n.body.querySelector(t):t},$$:function(e){return Array.isArray(e)?e:e.nodeType===Node.ELEMENT_NODE?[e]:"string"==typeof e?t.call(n.body.querySelectorAll(e)):t.call(e)}},i={init:function(t){var e=this,i=n.$$(".handy-scroll-body").filter((function(e){return e.contains(t)}));i.length&&(e.scrollBody=i[0]),e.container=t,e.visible=!0,e.initWidget(),e.update(),e.addEventHandlers(),e.skipSyncContainer=e.skipSyncWidget=!1},initWidget:function(){var t=this,e=t.widget=n.doc.createElement("div");e.classList.add("handy-scroll");var i=n.doc.createElement("div");i.style.width=t.container.scrollWidth+"px",e.appendChild(i),t.container.appendChild(e)},addEventHandlers:function(){var t=this;(t.eventHandlers=[{el:t.scrollBody||window,handlers:{scroll:function(){t.checkVisibility()},resize:function(){t.update()}}},{el:t.widget,handlers:{scroll:function(){t.visible&&!t.skipSyncContainer&&t.syncContainer(),t.skipSyncContainer=!1}}},{el:t.container,handlers:{scroll:function(){t.skipSyncWidget||t.syncWidget(),t.skipSyncWidget=!1},focusin:function(){setTimeout((function(){t.widget&&t.syncWidget()}),0)}}}]).forEach((function(t){var e=t.el,n=t.handlers;Object.keys(n).forEach((function(t){return e.addEventListener(t,n[t],!1)}))}))},checkVisibility:function(){var t=this,e=t.widget,i=t.container,o=t.scrollBody,c=e.scrollWidth<=e.offsetWidth;if(!c){var r=i.getBoundingClientRect(),l=o?o.getBoundingClientRect().bottom:window.innerHeight||n.html.clientHeight;c=r.bottom<=l||r.top>l,o&&(e.style.bottom="calc(100% - "+o.getBoundingClientRect().bottom+"px")}t.visible===c&&(t.visible=!c,e.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var t=this,e=t.widget.scrollLeft;t.container.scrollLeft!==e&&(t.skipSyncWidget=!0,t.container.scrollLeft=e)},syncWidget:function(){var t=this,e=t.container.scrollLeft;t.widget.scrollLeft!==e&&(t.skipSyncContainer=!0,t.widget.scrollLeft=e)},update:function(){var t=this,e=t.widget,n=t.container,i=t.scrollBody,o=n.clientWidth,c=n.scrollWidth;e.style.width=o+"px",i||(e.style.left=n.getBoundingClientRect().left+"px"),e.firstElementChild.style.width=c+"px",c>o&&(e.style.height=e.offsetHeight-e.clientHeight+1+"px"),t.syncWidget(),t.checkVisibility()},destroy:function(){var t=this;t.eventHandlers.forEach((function(t){var e=t.el,n=t.handlers;Object.keys(n).forEach((function(t){return e.removeEventListener(t,n[t],!1)}))})),t.widget.parentNode.removeChild(t.widget),t.eventHandlers=t.widget=t.container=t.scrollBody=null}},o=[],c={mount:function(t){n.$$(t).forEach((function(t){if(!c.mounted(t)){var e=Object.create(i);o.push(e),e.init(t)}}))},mounted:function(t){var e=n.$(t);return o.some((function(t){return t.container===e}))},update:function(t){n.$$(t).forEach((function(t){o.some((function(e){return e.container===t&&(e.update(),!0)}))}))},destroy:function(t){n.$$(t).forEach((function(t){o.some((function(e,n){return e.container===t&&(o.splice(n,1)[0].destroy(),!0)}))}))},destroyDetached:function(){o=o.filter((function(t){return!!n.body.contains(t.container)||(t.destroy(),!1)}))}};return n.isDOMAvailable&&n.ready((function(){c.mount("[data-handy-scroll]")})),c}));
