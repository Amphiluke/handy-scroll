/*!
handy-scroll v1.0.1
https://amphiluke.github.io/handy-scroll/
(c) 2018 Amphiluke
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.handyScroll=n()}(this,function(){"use strict";var t=Array.prototype.slice,n=document,e={doc:n,html:n.documentElement,body:n.body,$:function(t){return"string"==typeof t?e.body.querySelector(t):t},$$:function(n){return Array.isArray(n)?n:n.nodeType===Node.ELEMENT_NODE?[n]:"string"==typeof n?t.call(e.body.querySelectorAll(n)):t.call(n)}},i={init:function(t){var n=e.$$(".handy-scroll-body").filter(function(n){return n.contains(t)});n.length&&(this.scrollBody=n[0]),this.container=t,this.visible=!0,this.initWidget(),this.update(),this.syncWidget(),this.addEventHandlers()},initWidget:function(){var t=this.widget=e.doc.createElement("div");t.classList.add("handy-scroll");var n=e.doc.createElement("div");n.style.width=this.container.scrollWidth+"px",t.appendChild(n),this.container.appendChild(t)},addEventHandlers:function(){var t=this;(t.eventHandlers=[{el:t.scrollBody||window,handlers:{scroll:function(){t.checkVisibility()},resize:function(){t.update()}}},{el:t.widget,handlers:{scroll:function(){t.visible&&t.syncContainer(!0)}}},{el:t.container,handlers:{scroll:function(){t.syncWidget(!0)},focusin:function(){setTimeout(function(){return t.syncWidget()},0)}}}]).forEach(function(t){var n=t.el,e=t.handlers;Object.keys(e).forEach(function(t){return n.addEventListener(t,e[t],!1)})})},checkVisibility:function(){var t=this.widget,n=this.container,i=this.scrollBody,o=t.scrollWidth<=t.offsetWidth;if(!o){var s=n.getBoundingClientRect(),r=i?i.getBoundingClientRect().bottom:window.innerHeight||e.html.clientHeight;o=s.bottom<=r||s.top>r}this.visible===o&&(this.visible=!o,t.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==this.skipSyncContainer?(this.skipSyncWidget=t,this.container.scrollLeft=this.widget.scrollLeft):this.skipSyncContainer=!1},syncWidget:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0!==this.skipSyncWidget?(this.skipSyncContainer=t,this.widget.scrollLeft=this.container.scrollLeft):this.skipSyncWidget=!1},update:function(){var t=this.widget,n=this.container,e=this.scrollBody,i=n.getBoundingClientRect();t.style.width=i.width+"px",e||(t.style.left=i.left+"px"),t.firstElementChild.style.width=n.scrollWidth+"px",this.syncWidget(),this.checkVisibility()},destroy:function(){this.eventHandlers.forEach(function(t){var n=t.el,e=t.handlers;Object.keys(e).forEach(function(t){return n.removeEventListener(t,e[t],!1)})}),this.widget.parentNode.removeChild(this.widget),this.eventHandlers=this.widget=this.container=this.scrollBody=null}},o=[],s={mount:function(t){e.$$(t).forEach(function(t){if(!s.mounted(t)){var n=Object.create(i);o.push(n),n.init(t)}})},mounted:function(t){var n=e.$(t);return o.some(function(t){return t.container===n})},update:function(t){e.$$(t).forEach(function(t){o.some(function(n){return n.container===t&&(n.update(),!0)})})},destroy:function(t){e.$$(t).forEach(function(t){o.some(function(n,e){return n.container===t&&(o.splice(e,1)[0].destroy(),!0)})})}};function r(){s.mount("[data-handy-scroll]")}return"loading"===e.doc.readyState?e.doc.addEventListener("DOMContentLoaded",r,!1):r(),s});
