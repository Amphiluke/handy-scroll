/*!
handy-scroll v1.0.5
https://amphiluke.github.io/handy-scroll/
(c) 2019 Amphiluke
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).handyScroll=e()}(this,(function(){"use strict";var t=Array.prototype.slice,e=document,n={doc:e,html:e.documentElement,body:e.body,$:function(t){return"string"==typeof t?n.body.querySelector(t):t},$$:function(e){return Array.isArray(e)?e:e.nodeType===Node.ELEMENT_NODE?[e]:"string"==typeof e?t.call(n.body.querySelectorAll(e)):t.call(e)}},i={init:function(t){var e=n.$$(".handy-scroll-body").filter((function(e){return e.contains(t)}));e.length&&(this.scrollBody=e[0]),this.container=t,this.visible=!0,this.initWidget(),this.update(),this.syncWidget(),this.addEventHandlers()},initWidget:function(){var t=this.widget=n.doc.createElement("div");t.classList.add("handy-scroll");var e=n.doc.createElement("div");e.style.width=this.container.scrollWidth+"px",t.appendChild(e),this.container.appendChild(t)},addEventHandlers:function(){var t=this;(t.eventHandlers=[{el:t.scrollBody||window,handlers:{scroll:function(){t.checkVisibility()},resize:function(){t.update()}}},{el:t.widget,handlers:{scroll:function(){t.visible&&!t.skipSyncContainer&&t.syncContainer(),t.skipSyncContainer=!1}}},{el:t.container,handlers:{scroll:function(){t.skipSyncWidget||t.syncWidget(),t.skipSyncWidget=!1},focusin:function(){setTimeout((function(){return t.syncWidget()}),0)}}}]).forEach((function(t){var e=t.el,n=t.handlers;Object.keys(n).forEach((function(t){return e.addEventListener(t,n[t],!1)}))}))},checkVisibility:function(){var t=this.widget,e=this.container,i=this.scrollBody,o=t.scrollWidth<=t.offsetWidth;if(!o){var s=e.getBoundingClientRect(),c=i?i.getBoundingClientRect().bottom:window.innerHeight||n.html.clientHeight;o=s.bottom<=c||s.top>c}this.visible===o&&(this.visible=!o,t.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var t=this.widget.scrollLeft;this.container.scrollLeft!==t&&(this.skipSyncWidget=!0,this.container.scrollLeft=t)},syncWidget:function(){var t=this.container.scrollLeft;this.widget.scrollLeft!==t&&(this.skipSyncContainer=!0,this.widget.scrollLeft=t)},update:function(){var t=this.widget,e=this.container,n=this.scrollBody,i=e.clientWidth,o=e.scrollWidth;t.style.width=i+"px",n||(t.style.left=e.getBoundingClientRect().left+"px"),t.firstElementChild.style.width=o+"px",o>i&&(t.style.height=t.offsetHeight-t.clientHeight+1+"px"),this.syncWidget(),this.checkVisibility()},destroy:function(){this.eventHandlers.forEach((function(t){var e=t.el,n=t.handlers;Object.keys(n).forEach((function(t){return e.removeEventListener(t,n[t],!1)}))})),this.widget.parentNode.removeChild(this.widget),this.eventHandlers=this.widget=this.container=this.scrollBody=null}},o=[],s={mount:function(t){n.$$(t).forEach((function(t){if(!s.mounted(t)){var e=Object.create(i);o.push(e),e.init(t)}}))},mounted:function(t){var e=n.$(t);return o.some((function(t){return t.container===e}))},update:function(t){n.$$(t).forEach((function(t){o.some((function(e){return e.container===t&&(e.update(),!0)}))}))},destroy:function(t){n.$$(t).forEach((function(t){o.some((function(e,n){return e.container===t&&(o.splice(n,1)[0].destroy(),!0)}))}))}};function c(){s.mount("[data-handy-scroll]")}return"loading"===n.doc.readyState?n.doc.addEventListener("DOMContentLoaded",c,!1):c(),s}));
