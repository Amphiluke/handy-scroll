/*!
handy-scroll v1.1.3
https://amphiluke.github.io/handy-scroll/
(c) 2023 Amphiluke
*/
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).handyScroll=t()}(this,(function(){"use strict";var n=Array.prototype.slice,t="object"==typeof document&&!!document.documentElement,e={isDOMAvailable:t,doc:function(){return t?document:null},html:function(){return t?document.documentElement:null},body:function(){return t?document.body:null},ready:function(n){"loading"===e.doc().readyState?e.doc().addEventListener("DOMContentLoaded",(function(){n()}),{once:!0}):n()},$:function(n){return"string"==typeof n?e.body().querySelector(n):n},$$:function(t){return Array.isArray(t)?t:t.nodeType===Node.ELEMENT_NODE?[t]:"string"==typeof t?n.call(e.body().querySelectorAll(t)):n.call(t)}},i={init:function(n){var t=this,i=e.$$(".handy-scroll-body").filter((function(t){return t.contains(n)}));i.length&&(t.scrollBody=i[0]),t.container=n,t.visible=!0,t.initWidget(),t.update(),t.addEventHandlers(),t.skipSyncContainer=t.skipSyncWidget=!1},initWidget:function(){var n=this,t=n.widget=e.doc().createElement("div");t.classList.add("handy-scroll");var i=e.doc().createElement("div");i.style.width=n.container.scrollWidth+"px",t.appendChild(i),n.container.appendChild(t)},addEventHandlers:function(){var n=this;(n.eventHandlers=[{el:n.scrollBody||window,handlers:{scroll:function(){n.checkVisibility()},resize:function(){n.update()}}},{el:n.widget,handlers:{scroll:function(){n.visible&&!n.skipSyncContainer&&n.syncContainer(),n.skipSyncContainer=!1}}},{el:n.container,handlers:{scroll:function(){n.skipSyncWidget||n.syncWidget(),n.skipSyncWidget=!1},focusin:function(){setTimeout((function(){n.widget&&n.syncWidget()}),0)}}}]).forEach((function(n){var t=n.el,e=n.handlers;Object.keys(e).forEach((function(n){return t.addEventListener(n,e[n],!1)}))}))},checkVisibility:function(){var n=this,t=n.widget,i=n.container,o=n.scrollBody,c=t.scrollWidth<=t.offsetWidth;if(!c){var r=i.getBoundingClientRect(),l=o?o.getBoundingClientRect().bottom:window.innerHeight||e.html.clientHeight;c=r.bottom<=l||r.top>l}n.visible===c&&(n.visible=!c,t.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var n=this,t=n.widget.scrollLeft;n.container.scrollLeft!==t&&(n.skipSyncWidget=!0,n.container.scrollLeft=t)},syncWidget:function(){var n=this,t=n.container.scrollLeft;n.widget.scrollLeft!==t&&(n.skipSyncContainer=!0,n.widget.scrollLeft=t)},update:function(){var n=this,t=n.widget,e=n.container,i=n.scrollBody,o=e.clientWidth,c=e.scrollWidth;t.style.width=o+"px",i||(t.style.left=e.getBoundingClientRect().left+"px"),t.firstElementChild.style.width=c+"px",c>o&&(t.style.height=t.offsetHeight-t.clientHeight+1+"px"),n.syncWidget(),n.checkVisibility()},destroy:function(){var n=this;n.eventHandlers.forEach((function(n){var t=n.el,e=n.handlers;Object.keys(e).forEach((function(n){return t.removeEventListener(n,e[n],!1)}))})),n.widget.parentNode.removeChild(n.widget),n.eventHandlers=n.widget=n.container=n.scrollBody=null}},o=[],c={mount:function(n){e.$$(n).forEach((function(n){if(!c.mounted(n)){var t=Object.create(i);o.push(t),t.init(n)}}))},mounted:function(n){var t=e.$(n);return o.some((function(n){return n.container===t}))},update:function(n){e.$$(n).forEach((function(n){o.some((function(t){return t.container===n&&(t.update(),!0)}))}))},destroy:function(n){e.$$(n).forEach((function(n){o.some((function(t,e){return t.container===n&&(o.splice(e,1)[0].destroy(),!0)}))}))},destroyDetached:function(){o=o.filter((function(n){return!!e.body().contains(n.container)||(n.destroy(),!1)}))}};return e.isDOMAvailable&&e.ready((function(){c.mount("[data-handy-scroll]")})),c}));
