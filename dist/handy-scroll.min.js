/*!
handy-scroll v1.0.7
https://amphiluke.github.io/handy-scroll/
(c) 2021 Amphiluke
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).handyScroll=t()}(this,(function(){"use strict";var e=Array.prototype.slice,t="object"==typeof document&&!!document.documentElement,n={isDOMAvailable:t,doc:t?document:null,html:t?document.documentElement:null,body:t?document.body:null,ready:function(e){"loading"===n.doc.readyState?n.doc.addEventListener("DOMContentLoaded",(function(){e()}),{once:!0}):e()},$:function(e){return"string"==typeof e?n.body.querySelector(e):e},$$:function(t){return Array.isArray(t)?t:t.nodeType===Node.ELEMENT_NODE?[t]:"string"==typeof t?e.call(n.body.querySelectorAll(t)):e.call(t)}},i={init:function(e){var t=this,i=n.$$(".handy-scroll-body").filter((function(t){return t.contains(e)}));i.length&&(t.scrollBody=i[0]),t.container=e,t.visible=!0,t.initWidget(),t.update(),t.addEventHandlers(),t.skipSyncContainer=t.skipSyncWidget=!1},initWidget:function(){var e=this,t=e.widget=n.doc.createElement("div");t.classList.add("handy-scroll");var i=n.doc.createElement("div");i.style.width=e.container.scrollWidth+"px",t.appendChild(i),e.container.appendChild(t)},addEventHandlers:function(){var e=this;(e.eventHandlers=[{el:e.scrollBody||window,handlers:{scroll:function(){e.checkVisibility()},resize:function(){e.update()}}},{el:e.widget,handlers:{scroll:function(){e.visible&&!e.skipSyncContainer&&e.syncContainer(),e.skipSyncContainer=!1}}},{el:e.container,handlers:{scroll:function(){e.skipSyncWidget||e.syncWidget(),e.skipSyncWidget=!1},focusin:function(){setTimeout((function(){e.widget&&e.syncWidget()}),0)}}}]).forEach((function(e){var t=e.el,n=e.handlers;Object.keys(n).forEach((function(e){return t.addEventListener(e,n[e],!1)}))}))},checkVisibility:function(){var e=this,t=e.widget,i=e.container,o=e.scrollBody,c=t.scrollWidth<=t.offsetWidth;if(!c){var r=i.getBoundingClientRect(),l=o?o.getBoundingClientRect().bottom:window.innerHeight||n.html.clientHeight;c=r.bottom<=l||r.top>l}e.visible===c&&(e.visible=!c,t.classList.toggle("handy-scroll-hidden"))},syncContainer:function(){var e=this,t=e.widget.scrollLeft;e.container.scrollLeft!==t&&(e.skipSyncWidget=!0,e.container.scrollLeft=t)},syncWidget:function(){var e=this,t=e.container.scrollLeft;e.widget.scrollLeft!==t&&(e.skipSyncContainer=!0,e.widget.scrollLeft=t)},update:function(){var e=this,t=e.widget,n=e.container,i=e.scrollBody,o=n.clientWidth,c=n.scrollWidth;t.style.width=o+"px",i||(t.style.left=n.getBoundingClientRect().left+"px"),t.firstElementChild.style.width=c+"px",c>o&&(t.style.height=t.offsetHeight-t.clientHeight+1+"px"),e.syncWidget(),e.checkVisibility()},destroy:function(){var e=this;e.eventHandlers.forEach((function(e){var t=e.el,n=e.handlers;Object.keys(n).forEach((function(e){return t.removeEventListener(e,n[e],!1)}))})),e.widget.parentNode.removeChild(e.widget),e.eventHandlers=e.widget=e.container=e.scrollBody=null}},o=[],c={mount:function(e){n.$$(e).forEach((function(e){if(!c.mounted(e)){var t=Object.create(i);o.push(t),t.init(e)}}))},mounted:function(e){var t=n.$(e);return o.some((function(e){return e.container===t}))},update:function(e){n.$$(e).forEach((function(e){o.some((function(t){return t.container===e&&(t.update(),!0)}))}))},destroy:function(e){n.$$(e).forEach((function(e){o.some((function(t,n){return t.container===e&&(o.splice(n,1)[0].destroy(),!0)}))}))}};return n.isDOMAvailable&&n.ready((function(){c.mount("[data-handy-scroll]")})),c}));
